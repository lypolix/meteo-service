# Метео-сервис: City Weather & Map

## Описание проекта

Современный погодный сервис с собственным API, адмирируемым через Postgres, и красивым frontend на React. Позволяет быстро узнать прогноз погоды для любого города мира, воспользоваться поиском с подсказками, выбрать город на карте, а также посмотреть погоду в одном из 40+ популярных городов. Система автоматически обновляет данные через cron.

---

## Технологии

### Бэкенд (API и фоновые задачи)

- **Язык:** Go (Golang)
- **Фреймворк/Библиотеки:** net/http, go-chi, gocron, pgx, sql-migrate
- **БД:** PostgreSQL (контейнер docker)
- **Крон:** gocron (автоматическое обновление погодных данных для всех городов)
- **Интеграции:**
  - [Open-Meteo Weather API](https://open-meteo.com/) — получение температуры и погодных условий.
  - [Open-Meteo Geocoding API](https://open-meteo.com/en/docs/geocoding-api) — поиск и автодополнение городов.
- **Миграции:** SQL-файлы в папке ./database/migrations

### Фронтенд

- **Язык:** TypeScript + React
- **UI:** Material UI (MUI v5)
- **Карта:** React-Leaflet + OpenStreetMap
- **Оформление:** CSS, кастомные темы MUI, иконки Material Icons
- **Фичи:**
  - Адаптивный дизайн
  - Градиентные карточки и элементы "стекла"
  - Autocomplete для поиска города
  - 40+ популярных городов мира
  - Интерактивная карта с поддержкой клика и определения города

---

## Быстрый старт

### 1. Клонирование и запуск БД

```
git clone https://github.com/USER/meteo-service.git
cd meteo-service
docker compose up -d # Запустит PostgreSQL
```

### 2. Применить миграции

```
migrate -path ./database/migrations -database "postgres://postgres:password@localhost:54321/meteo?sslmode=disable" up
```


### 3. Запуск бэкенда

```
go run ./cmd/server/main.go
```

### 4. Запуск фронтенда
```
cd meteo-frontend
npm install
npm start
```

---

## Описание работы

- backend сохраняет и обновляет (через cron) погодные данные для списка городов
- frontend обеспечивает:
  - отображение актуальной погоды
  - поиск и подсказки по названию города
  - просмотр погоды в популярных городах (карточки, карусель со сменой карточек)
  - выбор города на карте + автоматический reverse-geocoding

---

## API интерактивное описание

### Поиск города

**GET /cities/search?q=строка**

Ищет города по части названия (использует Open-Meteo Geocoding API)

**Пример запроса:**
```
GET http://localhost:8080/cities/search?q=London
```

**Пример ответа:**
```
[
{
"name": "London",
"country": "United Kingdom",
"latitude": 51.5074,
"longitude": -0.1278
},
...
]
```

---

### Получить погоду по названию города
```
**GET /:city**
```
**Пример запроса:**
```
GET http://localhost:8080/moscow
```

**Пример ответа:**
```
{
"name": "moscow",
"timestamp": "2025-10-25T22:38:31Z",
"temperature": 2.1
}
```
---

## Фичи фронтенда

- Поиск с автодополнением любого города мира (autocomplete)
- Красивые карточки с погодой (температура, город, время обновления)
- Карусель с карточками погоды популярных городов
- 40+ популярных городов прямо на карте
- Карту мира можно использовать для выбора города (по клику сразу показывается его погода)
- Полная адаптивность для мобилок и планшетов

---


### Интерактивная карта для поиска города
![Интерактивная карта для поиска города](./pic1.png)

### Поиск города по названию
![Экран настроек](./pic2.png)

### Просмотр погоды выбранного города
![Экран настроек](./pic3.png)

### Карусель популярных городов с погодой в них 
![Экран настроек](./pic4.png)
